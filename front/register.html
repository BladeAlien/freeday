<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <script src="js/jquery-3.6.0.min.js" type="text/javascript"></script>
</head>

<body>

    <div>
        <form>
            <div>
                <label>账号</label>
                <input id="username" type="text" maxlength="15">
            </div>
            <div>
                <label>密码</label>
                <input id="password" type="password" maxlength="20">
            </div>
            <div>
                <label>邮箱</label>
                <input type="email" id="email" maxlength="50">
            </div>
            <br>
            <div>
                <input type="submit" id="register" value="注册">
            </div>
        </form>
    </div>

    <script>
        $(document).ready(function () {
            $("#register").click(function () {
                var userName = $("#username").val();
                var pass = $("#password").val();
                var email = $("#email").val();
                if (userName == "" || pass == "" || Email == "") {
                    alert("账号、密码和邮箱均不能为空");
                    return false;
                } else {
                    $.post("/api/register",
                        JSON.stringify({
                            "name": userName,
                            "passwd": pass,
                            "email": email
                        }), function (data, status) {
                            if (data.status) {
                                alert("注册成功，去登录");
                                location.href = "login.html";
                            } else {
                                alert("注册失败");
                            }
                        }, "json"
                    );
                    return true;
                }
            });
        });

    </script>

</body>

</html>